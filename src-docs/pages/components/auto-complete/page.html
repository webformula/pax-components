<article class="page-article">
  <h3>Auto complete</h3>

  <div class="showcase mdw-elevation-1">
    <mdw-textfield id="show-textfield">
      <input />
      <label>Filled</label>
      <mdw-autocomplete id="show-auto" onchange="activePage.onChange(event)"></mdw-autocomplete>
    </mdw-textfield>
  </div>

  <div class="links">
    <div class="eyebrow">contents</div>
    <anchor-link selector="#basic" offset="64">Basic</anchor-link>
    <anchor-link selector="#template" offset="64">Template</anchor-link>
  </div>


  <section id="types">
    <h4>Types</h4>

    <mdw-card id="basic">
      <div class="mdw-card__content">
        <h6>Basic</h6>
        <p>Place auto-complete inside mdw-textfield to add auto complete functionality</p>
      </div>

      <div class="mdw-card__content--no-padding">
        <monaco-editor language="html">
          <mdw-textfield id="one">
            <input />
            <label>Basic</label>
            <mdw-autocomplete id="auto" onchange="activePage.onChange(event)"></mdw-autocomplete>
          </mdw-textfield>
        </monaco-editor>

        <monaco-editor language="javascript">
          const values = [
            { text: 'one' },
            { text: 'two' },
            { text: 'three' },
            { text: 'four' },
            { text: 'five' }
          ];
          const debounced_onInput = MDWUtils.debounce(onInput.bind(this), 300);
          document.querySelector('#basic-textfield').addEventListener('input', debounced_onInput);

          async onInput(event) {
            document.querySelector('#basic-autocomplete').loading(); // shows spinner. spinner auto hides
            cont results = await getData();
            document.querySelector('#basic-autocomplete').data = results.filter(v => v.text.includes(event.target.value));
          }
        </monaco-editor>
      </div>
      
      <div class="mdw-card__content" style="display: block;">
        <mdw-textfield id="basic-textfield">
          <input />
          <label>Basic</label>
          <mdw-autocomplete id="basic-auto" onchange="activePage.onChange(event)"></mdw-autocomplete>
        </mdw-textfield>
      </div>
    </mdw-card>


    <mdw-card id="template">
      <div class="mdw-card__content">
        <h6>Template</h6>
        <p>You can set a custom row template</p>
      </div>
    
      <div class="mdw-card__content--no-padding">
        <monaco-editor language="html">
          <mdw-textfield id="one">
            <input />
            <label>Filled</label>
            <mdw-autocomplete id="auto" onchange="activePage.onChange(event)"></mdw-autocomplete>
          </mdw-textfield>
        </monaco-editor>
    
        <monaco-editor language="javascript">
          templateItems = [
            {
              text: 'one',
              secondary: 'other one text'
            },
            {
              text: 'two',
              secondary: 'other two text'
            },
              {
              text: 'three',
              secondary: 'other three text'
            },
            {
              text: 'four',
              secondary: 'other four text'
            },
            {
              text: 'five',
              secondary: 'other five text'
            }
          ];
          const debounced_onInput = MDWUtils.debounce(onInput.bind(this), 300);
          document.querySelector('#template-textfield').addEventListener('input', debounced_onInput);

          document.querySelector('#template-autocomplete').rowTemplate = (data) => /*html*/\`
            <mdw-list-item style="padding: 6px 12px;">
              <div class="mdw-list-item__text">
                <div class="mdw-list-item__primary-text">
                  \${data.text}
                </div>
                <div class="mdw-list-item__secondary-text">
                  \${data.secondary}
                </div>
              </div>
            </mdw-list-item>
          \`;
    
          async onInput(event) {
            document.querySelector('#template-autocomplete').loading(); // shows spinner. spinner auto hides
            cont results = await getData();
            document.querySelector('#template-autocomplete').data = results.filter(v => v.text.includes(event.target.value));
          }
        </monaco-editor>
      </div>
    
      <div class="mdw-card__content" style="display: block;">
        <mdw-textfield id="template-textfield">
          <input />
          <label>Basic</label>
          <mdw-autocomplete id="template-autocomplete" onchange="activePage.onChange(event)"></mdw-autocomplete>
        </mdw-textfield>
      </div>
    </mdw-card>
  </section>
</article>
